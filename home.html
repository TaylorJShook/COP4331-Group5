<html>
<head>
  <title>Contact Manager - Home</title>
  <script type="text/javascript" src="js/code.js"></script>
  <link href="css/styles.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">

  <script type="text/javascript">
    // On page load, verify the user is logged in.
    // readCookie() fills userId or redirects to index.html.
    // We'll also optionally kick off an initial search after login.
    document.addEventListener('DOMContentLoaded', function () {
      readCookie();        // if userId < 0 -> redirect to index.html (login)
    }, false);
  </script>
</head>
<body>

  <h1 id="title">Contact Manager</h1>

  <!-- Logged-in bar: shows user name and a Log Out button. -->
  <div id="loggedInDiv">
    <!-- code.js can fill this with "Logged in as First Last" using cookie values -->
    <span id="userName"></span><br />
    <button type="button" id="logoutButton" class="buttons" onclick="doLogout();"> Log Out </button>
  </div>

  <!-- Main app panel: search, results, add-contact. -->
  <div id="accessUIDiv">
    <!-- ====== SEARCH SECTION ====== -->
    <!-- Search by name/email/phone. We keep one input. -->
    <input type="text" id="searchText" placeholder="Search contacts (name, email, phone)" />
    <button type="button" id="searchButton" class="buttons" onclick="searchContacts();"> Search </button><br />

    <!-- Result message area ("Contacts retrieved", "No results", errors). -->
    <span id="contactSearchResult"></span>

    <!-- Where we will render the contacts table (built by renderContacts() in code.js).
        Using a <div> instead of <p> so we can insert a <table>. -->
    <div id="results"></div>

    <br /><br />

    <!-- ====== ADD CONTACT SECTION ====== -->
    <input type="text" id="addFirstName" placeholder="First Name" /><br />
    <input type="text" id="addLastName"  placeholder="Last Name" /><br />
    <input type="text" id="addPhone"     placeholder="Phone" /><br />
    <input type="text" id="addEmail"     placeholder="Email" /><br />
    <!-- Button calls addContact() in code.js: reads fields above, POSTs JSON, refreshes list -->
    <button type="button" id="addContactButton" class="buttons" onclick="addContact();"> Add Contact </button><br />

    <!-- Add-contact message area (e.g., "Contact added", validation error, etc.) -->
    <span id="contactAddResult"></span>
  </div>

</body>
</html>
