<!DOCTYPE html>
<html lang="en">
<head>
  <title>Contact Manager - Home</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script type="text/javascript" src="js/code.js"></script>
  <link href="css/styles.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">

  <script type="text/javascript">
    // On page load, verify the user is logged in.
    // readCookie() fills userId or redirects to index.html.
    document.addEventListener('DOMContentLoaded', function () {
      readCookie(); // if userId < 0 -> redirect to index.html (login)
    }, false);
  </script>
</head>
<body class="bg-home">

  <h1 id="title">Contact Manager</h1>

  <main id="main" role="main">
    <!-- Logged-in bar: shows user name and a Log Out button. -->
    <div id="loggedInDiv">
      <!-- code.js fills this with "Logged in as First Last" -->
      <span id="userName"></span><br />
      <button type="button" id="logoutButton" class="buttons" onclick="doLogout();"> Log Out </button>
    </div>

    <!-- Main app panel: search, results, add-contact. -->
    <div id="accessUIDiv">
      <!-- ====== SEARCH SECTION ====== -->
      <!-- Wrap in a form so Enter submits; keep layout via sr-only label -->
      <form onsubmit="searchContacts(); return false;" aria-label="Search contacts">
        <label class="sr-only" for="searchText">Search contacts</label>
        <input
          type="text"
          id="searchText"
          placeholder="Search contacts (name, email, phone)"
          autocomplete="off"
        />
        <button type="submit" id="searchButton" class="buttons">Search</button>
      </form>
      <br />

      <!-- Result message area ("Contacts retrieved", "No results", errors). -->
      <span id="contactSearchResult" role="status" aria-live="polite"></span>

      <!-- Where we will render the contacts table (renderContacts() in code.js) -->
      <div id="results" aria-live="off"></div>

      <br /><br />

      <!-- ====== ADD CONTACT SECTION ====== -->
      <!-- Wrap in a form so Enter submits Add; labels are sr-only to keep layout -->
      <form onsubmit="addContact(); return false;" aria-labelledby="addContactHeading">
        <h2 id="addContactHeading" class="sr-only">Add a new contact</h2>

        <label class="sr-only" for="addFirstName">First Name</label>
        <input type="text" id="addFirstName" placeholder="First Name" autocomplete="given-name" required /><br />

        <label class="sr-only" for="addLastName">Last Name</label>
        <input type="text" id="addLastName"  placeholder="Last Name"  autocomplete="family-name" required /><br />

        <label class="sr-only" for="addPhone">Phone</label>
        <input type="tel" id="addPhone"     placeholder="Phone"       inputmode="tel" autocomplete="tel" /><br />

        <label class="sr-only" for="addEmail">Email</label>
        <input type="email" id="addEmail"     placeholder="Email"     autocomplete="email" /><br />

        <!-- Button calls addContact() in code.js: reads fields, POSTs JSON, refreshes list -->
        <button type="submit" id="addContactButton" class="buttons">Add Contact</button>
      </form>
      <br />

      <!-- Add-contact message area (e.g., "Contact added", validation error, etc.) -->
      <span id="contactAddResult" role="status" aria-live="polite"></span>
    </div>
  </main>

</body>
</html>
